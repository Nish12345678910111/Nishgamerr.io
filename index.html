-- Enable RLS
alter table messages enable row level security;

-- Allow everyone to select, insert, and delete their own messages
create policy "Allow read to all"
on messages
for select
using (true);

create policy "Allow insert to all"
on messages
for insert
with check (true);

create policy "Allow delete own messages"
on messages
for delete
using (auth.role() = 'anon');
